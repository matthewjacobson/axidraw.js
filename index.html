<!DOCTYPE html>
<html lang="en">
  
  <head>
    <title>axidraw.js</title>
    <script src="src/axidraw.js" defer></script>
  </head>
  
  <body>
    
    <button id="butConnect">Connect</button>
    <br><br>
    <label for="title">Send: </label>
    <br>
    <textarea id="textInput" rows="20" cols="80">TP</textarea>
    <br>
    <button id="butSend">Send</button>
    <br><br>
    <label for="title">Receive: </label>
    <br>
    <textarea id="textOutput" rows="20" cols="80"></textarea>
    <br>
    <a href="http://evil-mad.github.io/EggBot/ebb.html">AxiDraw Commands Here</a>
    
    <script>
      
      const butConnect = document.getElementById('butConnect');
      const butSend = document.getElementById('butSend');
      const textInput = document.getElementById('textInput');
      const textOutput = document.getElementById('textOutput');
      
      let axidraw = new Axidraw();
      
      document.addEventListener('DOMContentLoaded', () => {
        if ('serial' in navigator) {
          butConnect.addEventListener('click', axidraw.connect());
          butSend.addEventListener('click', clickSend);
        } else {
          console.log('Browser not supported - please try again in chrome');
          butConnect.innerText = 'Browser not supported';
          butConnect.disabled = true;
        }
      });
      
      function clickSend() {
        textOutput.value = axidraw.write(textInput.value);
        textInput.value = '';
      }
      
    </script>
  </body>
  
</html>
